{"ast":null,"code":"import axios from 'axios';\nimport { imageTypes, getImageUrls } from './utils';\nconst ACCESS_KEY = 'rkcVhVCZfLEaTGKdJar6pLrHvR9QC9Mn2a6R8Yk7I1g';\nconst AUTH_HEADER = {\n  Authorization: `Client-ID ${ACCESS_KEY}`\n};\nconst BASE_URL = 'https://api.unsplash.com/photos';\nconst AUTH_PARAM = `?client_id=${ACCESS_KEY}`;\nexport const getImages = async page => {\n  try {\n    let images = [];\n    const imagesList = await axios.get(`${BASE_URL}`, {\n      headers: AUTH_HEADER\n    }); // TODO: move this out\n\n    if (imagesList.data.length) {\n      const imageUrls = getImageUrls(imagesList.data, imageTypes.THUMB);\n      images = getThumbnails(imageUrls);\n    }\n\n    return images;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getThumbnails = async imageUrls => {\n  let results = await Promise.all(imageUrls.map(url => {\n    let response;\n\n    try {\n      response = axios.get(imageUrls, {\n        headers: AUTH_HEADER\n      });\n\n      if (response.status === 200) {\n        return response.data;\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }));\n  return results;\n};\n\nexport const getImage = async url => {\n  try {\n    return await axios.get(url, {\n      headers: AUTH_HEADER\n    });\n  } catch (err) {\n    throw err;\n  }\n};","map":{"version":3,"sources":["/Users/joshnguyen/Documents/Development/tradeRev/traderev/src/Api.js"],"names":["axios","imageTypes","getImageUrls","ACCESS_KEY","AUTH_HEADER","Authorization","BASE_URL","AUTH_PARAM","getImages","page","images","imagesList","get","headers","data","length","imageUrls","THUMB","getThumbnails","err","results","Promise","all","map","url","response","status","console","log","getImage"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,SAAzC;AAEA,MAAMC,UAAU,GAAG,6CAAnB;AACA,MAAMC,WAAW,GAAG;AAAEC,EAAAA,aAAa,EAAG,aAAYF,UAAW;AAAzC,CAApB;AACA,MAAMG,QAAQ,GAAG,iCAAjB;AACA,MAAMC,UAAU,GAAI,cAAaJ,UAAW,EAA5C;AAEA,OAAO,MAAMK,SAAS,GAAG,MAAOC,IAAP,IAAgB;AACvC,MAAI;AACF,QAAIC,MAAM,GAAG,EAAb;AACA,UAAMC,UAAU,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAW,GAAEN,QAAS,EAAtB,EAAyB;AAAEO,MAAAA,OAAO,EAAET;AAAX,KAAzB,CAAzB,CAFE,CAIF;;AACA,QAAIO,UAAU,CAACG,IAAX,CAAgBC,MAApB,EAA4B;AAC1B,YAAMC,SAAS,GAAGd,YAAY,CAACS,UAAU,CAACG,IAAZ,EAAkBb,UAAU,CAACgB,KAA7B,CAA9B;AAEAP,MAAAA,MAAM,GAAGQ,aAAa,CAACF,SAAD,CAAtB;AACD;;AAED,WAAON,MAAP;AACD,GAZD,CAYE,OAAMS,GAAN,EAAW;AACX,UAAMA,GAAN;AACD;AACF,CAhBM;;AAkBP,MAAMD,aAAa,GAAG,MAAOF,SAAP,IAAqB;AACzC,MAAII,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAR,CAAYN,SAAS,CAACO,GAAV,CAAcC,GAAG,IAAI;AACnD,QAAIC,QAAJ;;AAEA,QAAI;AACFA,MAAAA,QAAQ,GAAGzB,KAAK,CAACY,GAAN,CAAUI,SAAV,EAAqB;AAAEH,QAAAA,OAAO,EAAET;AAAX,OAArB,CAAX;;AAEA,UAAIqB,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,eAAOD,QAAQ,CAACX,IAAhB;AACD;AACF,KAND,CAME,OAAOK,GAAP,EAAY;AACZQ,MAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACD;AACF,GAZ+B,CAAZ,CAApB;AAcA,SAAOC,OAAP;AACD,CAhBD;;AAkBA,OAAO,MAAMS,QAAQ,GAAG,MAAOL,GAAP,IAAe;AACrC,MAAI;AACF,WAAO,MAAMxB,KAAK,CAACY,GAAN,CAAUY,GAAV,EAAe;AAAEX,MAAAA,OAAO,EAAET;AAAX,KAAf,CAAb;AACD,GAFD,CAEE,OAAMe,GAAN,EAAW;AACX,UAAMA,GAAN;AACD;AACF,CANM","sourcesContent":["import axios from 'axios';\nimport { imageTypes, getImageUrls } from './utils';\n\nconst ACCESS_KEY = 'rkcVhVCZfLEaTGKdJar6pLrHvR9QC9Mn2a6R8Yk7I1g';\nconst AUTH_HEADER = { Authorization: `Client-ID ${ACCESS_KEY}` };\nconst BASE_URL = 'https://api.unsplash.com/photos';\nconst AUTH_PARAM = `?client_id=${ACCESS_KEY}`        \n\nexport const getImages = async (page) => {\n  try {\n    let images = [];\n    const imagesList = await axios.get(`${BASE_URL}`, { headers: AUTH_HEADER });\n\n    // TODO: move this out\n    if (imagesList.data.length) {\n      const imageUrls = getImageUrls(imagesList.data, imageTypes.THUMB);\n\n      images = getThumbnails(imageUrls);\n    }\n\n    return images;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst getThumbnails = async (imageUrls) => {\n  let results = await Promise.all(imageUrls.map(url => {\n    let response;\n\n    try {\n      response = axios.get(imageUrls, { headers: AUTH_HEADER });\n\n      if (response.status === 200) {\n        return response.data;\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }));\n\n  return results;\n}\n\nexport const getImage = async (url) => {\n  try {\n    return await axios.get(url, { headers: AUTH_HEADER });\n  } catch(err) {\n    throw err;\n  }\n};\n\n"]},"metadata":{},"sourceType":"module"}